<html lang="en" data-namespace-typo3-fluid="true"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="https://typo3.org/ns/TYPO3/Fluid/ViewHelpers"
      xmlns:v="https://typo3.org/ns/FluidTYPO3/Vhs/ViewHelpers">

{v:content.resources.fal(field: 'flexform_imageReference', record: data)
    -> v:iterator.first()
    -> f:variable(name: '_image')}
<f:if condition="{_image}">
    {f:variable(name: '_imageClasses', value: 'card-img')}
    <f:if condition="{data.flexform_imagePosition} == 'top' || {data.flexform_imagePosition} == 'bottom'">
        {f:variable(name: '_imageClasses', value: 'card-img-{data.flexform_imagePosition}')}
    </f:if>
    <f:if condition="{data.flexform_imageClasses}">
        {f:variable(name: '_imageClasses', value: '{_imageClasses} {data.flexform_imageClasses}')}
    </f:if>
    <f:image class="{_imageClasses}" treatIdAsReference="1" src="{_image.id}" crop="{_image.crop}"
             title="{_image.title}" alt="{_image.alternative}" width="{data.flexform_imageWidth}"/>
</f:if>
<f:if condition="{children.2.201}">
    <div class="ppc-image-wrap">
        <f:for each="{children.2.201}" as="item">
            <v:content.render contentUids="{0: item.data.uid}"/>
        </f:for>
    </div>
</f:if>

</html>
